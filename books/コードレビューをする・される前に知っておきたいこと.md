# コードレビューを受ける前に知っておきたい5つのこと

## はじめに

昨今、どの企業もコードの品質を維持するためにコードレビュー(あるいはそれに準ずること)をすると思います。  
私が属している部署でもコードレビューは活発に行われています。

本稿は、新人研修のコードやプロダクトのコードをレビューしている際に、  
コードレビューを受ける前にこういったことは先に理解していてほしいなと思ったことをまとめました。

### コードレビューとは

コードレビューとは、**開発サイクルの中で他者がコードを査読するプロセス**です。  
本稿ではコードレビュー自体について言及はしませんが、より理解を深めたい方は、「[google-eng-practices-ja](https://fujiharuka.github.io/google-eng-practices-ja/ja/review/)」を読んでみてください。

### 想定プロセス



次項から本題に入ります。

## 1. コードレビューは自身が困っていることを解決する場ではない

例えば`pull request`を出した際に、「実は~のような事に困っていてどうしたらいいですか？」のような話を混ぜていませんか？  
これが命名など軽微な質問であればそこまで問題になりませんが、設計などの質問であればどうでしょう？

プロダクトをチーム開発で開発していれば、必ず守るべき**期日**があります。  
コードレビューの多くはプロダクトに変更を加えるフェーズの終盤にあり、そこで設計などの根幹的な質問をすると期日に間に合わなくなります。  

何が言いたいかというと、戻りを減らすため自身が抱えている疑問は`issue`などの前段階でディスカッションしましょう。  
開発が難しかったり、すり合わせたいことがコード上に多くあるのであれば**ペアプロ**などのコラボレーションも良いでしょう。

コードレビュー時には、自身の観点においてマージ可能な状態になっていることが望ましいです。  
そのための必要な情報は早い段階で入手しましょう。

## 2. コードレビューに必要な情報を必ずレビュアーに共有する

大前提として、プログラマなのでコードで伝えられることはコードで伝えましょう。コード上の背景はコメントアウトなども駆使して伝えましょう。

それとは別の話で、例えばコミットログがすべて「commit」で`pull request`のカンバンにも目的が一切書かれていないような場合、レビュアーは全体像を把握しにくいといった類の話です。  
この例は大げさ(だといいが)ですが、大事な情報が共有されないままということはよくあると思います。

そのような暗黙知を表層化することがコードレビューの意義の一つであると思っています。  
コードだけに限らず、関連する思考プロセスやTipsは積極的に共有しましょう。

ちなみに、こういった共有をしないとレビュアーの負担が増えたり、コードレビュー自体が健全に行われなくなるので注意しましょう。

## 3. 書いたコードに責任を持つ

1.に近い話ですが、コードレビュー時には、自身の観点においてマージ可能な状態になっていることが望ましいです。  
その「自身の観点においてマージ可能な状態」に持っていくためには、書いたコードに責任を持つ必要があります。

「責任を持つ」とはどういうことかというと、「説明責任を持つ」とほぼ同一と思ってもらって問題ありません。

例えば、誰かがQiita記事で投稿しているコードをそっくりそのままコピペで流用したとします。  
そのコードをレビュアーが質問

## 4. 相手と対話する意識を持つ

## 5. レビュアー(と開発者お互い)に感謝を伝える

これが一番大事です(マジです)。どんなにレビュアーに苛立ちを覚えても、貴重な時間を割いて自身と異なる観点を提供してくれることに感謝しましょう。  
レビュアーも同じです。開発者がチームに貢献してくれたことを感謝しましょう。

このことは、**心理的安全性**を確立する上でも大事です。有意義な議論をする上でお互いに、ある程度アツく話さなければならない時があると思います。  
そういった際に、「相手のことを尊重した上で話している」のとそうでないの場合とでは、話せるレベル感が変わってくると思います。

## おわりに
