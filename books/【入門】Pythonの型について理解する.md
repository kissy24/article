# 【2022年版】Pythonでデータ型について入門する

## 1. はじめに

Pythonのデータ型について最低限知っておいてほしいことをまとめました。

※ 対象とするPythonのバージョンは`3.11`までとします。

## 2. データ型とは

メモリの2進数情報を変換した時の解釈物です。

> 01000001(2進数) -> 65(10進数)

例えばC言語の基本データ型である`char`は1バイト(-128～127の値)記憶できます。  
(英数字などの１バイト文字を１字記憶できます。上記例だと`A`が割り当てられています。)

Pythonでも、もちろん同じ原理です。
(Python3以降から[Unicode](https://docs.python.org/ja/3/howto/unicode.html)が標準です)

```py
# Aのコードポイントを2進数で出力
bin(ord('A'))
>>> '0b1000001'
```

## 3. データ型の種類について

「組み込み型(プリミティブ型)」と「複合型(コンポジット型)」があります。  
この2つはよく対比されますが、対照的な概念ではないです。  
どちらかというと、ラッパーとかそういうイメージに近いです。

### 3.1. 組み込み型

各プログラミング言語が規定している基本的なデータ型。(例. char, int, float, bool 等)  
そのため、ある言語では複合型に分類されるデータ型も別の言語では組み込み型になる可能性はあります。

### 3.2. 複合型

> プリミティブ型および複合データ型の構造的または再帰的な組み合わせ（コンポジション）で形成されるデータ型

([wikipedia](https://ja.wikipedia.org/wiki/%E3%83%97%E3%83%AA%E3%83%9F%E3%83%86%E3%82%A3%E3%83%96%E5%9E%8B)参照)

構造体や、配列やリストなどはそれらに該当することが多いです。

### 3.3. Pythonは？

組み込み型とコンテナデータ型(複合型)があります。

- [組み込み型](https://docs.python.org/ja/3/library/stdtypes.html)
- [コンテナデータ型](https://docs.python.org/ja/3/library/collections.html) : 標準ライブラリ`collections`に含まれています

そして、これらはすべてのデータ型は**オブジェクト**からできています。  
詳しくは[Pythonのオブジェクトとクラスのビジュアルガイド](https://postd.cc/pythons-objects-and-classes-a-visual-guide/)を読んでみてください。

## 4. 型付けについて

分類としては、大きく2観点あります。  
(型がないとか構造的部分型等には今回は触れません)

- 動的/静的型付け
- 強い/弱い型付け

また、大前提として「動的」だから良いとか「強い」から良いとかはありません。チームの文化や個人の価値観に良し悪しは依存します。

### 4.1. 動的/静的型付け

ここでは便宜上よく使われている処理方式で動的/静的を区別しています。  
もちろん、インタプリタ言語でもコンパイルをサポートしているものはあるし、コンパイラ言語でもインタプリタのような逐次実行をサポートしているものもあります。

**静的型付け**: コンパイル時に型が決まる(コンパイラ言語)

- Java, C, C#, Go, Rust等
- コンパイラ言語は実行前にデータ型が正しいかを判断できる。
- コンパイルから実行までのハードルが高い反面、高速に動作する。

**動的型付け**: 実行時に型が決まる(インタプリタ言語)

- Python, Ruby, Perl, PHP等
- インタプリタは実行時までデータ型が分からない。
- 実行が気軽に行える反面、機械語に逐次翻訳されるので速度は遅め。

現在では、動的型付け・静的型付けの各特徴を使い分ける漸進的型付け(Gradual Typing)の機能を導入している言語もあります。  
(詳細は「[What is Gradual Typing](https://wphomes.soic.indiana.edu/jsiek/what-is-gradual-typing/)」や「[What is Gradual Typing: 漸進的型付けとは何か](https://qiita.com/t2y/items/0a604384e18db0944398)」がオススメです)

**漸進的型付け**: 実行前に型推論される(決まるわけではない)

- Python, TypeScript
- 現状、動的型付け言語に型アノテーションを導入して実現するケースが多い。
  - C言語のauto等は静的型付け言語に動的な特徴が足されていたりします。
- Pythonだと型アノテーションに強制力がなかったりするし、TypeScriptだと型が表現されないとany型になったりと、言語思想によって許容範囲が異なります。

まとめると、Pythonは「動的型付け」か「漸進的型付け」言語にあたります。

### 4.2. 強い/弱い型付け

強い、弱いの定義は割りとまちまち([この記事](https://matarillo.hatenadiary.jp/entry/20121017/p1)を参照)  
今回は型安全に触れておきたいため、言及します。

**強い型付け**: 型の安全性が言語仕様で保たれているもの

- Java, C#, Python, Ruby 等
- 型安全: 型によるバグの検知ができる(静的・動的に関係なく)
- null安全とは限らない。(JavaやPython等は許容されている)
  - Pythonは型を定義しない場合はnull(`None`)を許容すべきではないです。(意図しないデータ型を混入させたくないため)

**弱い型付け**: 型の安全性が保証されないもの

- C, C++, JavaScript 等
- 型安全が保たれていないとどうなるかは下記例を見るとわかりますが、異なる型で意図しない計算ができてしまったりします。

  ```js
  console.log(1 + true);
  >>> 2
  ```

## 5. OOPにおけるデータ型

### 5.1. クラス関連

### 5.2. ポリモーフィズム

### 5.3. Pythonで意識することは？

Pythonには、**構造体**や**インターフェース**は存在しません。よってそれらをクラス、あるいは抽象基底クラスで表現することになります。  
もちろんこういった概念を無視して、俺だけ最強クラスを定義して継承したりもできますが、近年ではそういった実装はアンチパターンとして認知されています。

## 6. おわりに
